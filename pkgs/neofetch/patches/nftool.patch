--- src/neofetch.orig
+++ src/neofetch
@@ -1,4 +1,4 @@
-#!/usr/bin/env bash
+#!/var/usr/bin/env bash
 # vim: noai:ts=4:sw=4:expandtab
 # shellcheck source=/dev/null
 # shellcheck disable=2009 disable=2153 disable=2154 disable=2243 disable=2244 disable=2317
@@ -189,7 +189,7 @@
 # kib  '1020928KiB / 7117824KiB'
 # mib  '1042MiB / 6951MiB'
 # gib: ' 0.98GiB / 6.79GiB'
-memory_unit="gib"
+memory_unit="mib"
 
 # Change memory output precision.
 #
@@ -3405,6 +3405,10 @@
         ;;
 
         "Mac OS X" | "macOS" | "iPhone OS")
+            if command -v nftool > /dev/null; then
+                mem_used="$(nftool usedmem)"
+                mem_total="$(($(sysctl -n hw.memsize) / 1024))"
+            else
             hw_pagesize="$(sysctl -n hw.pagesize)"
             mem_total="$(($(sysctl -n hw.memsize) / 1024))"
             pages_app="$(($(sysctl -n vm.page_pageable_internal_count) - $(sysctl -n vm.page_purgeable_count)))"
@@ -3412,6 +3416,7 @@
             pages_compressed="$(vm_stat | awk '/ occupied/ { printf $5 }')"
             pages_compressed="${pages_compressed:-0}"
             mem_used="$(((pages_app + ${pages_wired//.} + ${pages_compressed//.}) * hw_pagesize / 1024))"
+            fi
         ;;
 
         "BSD" | "MINIX" | "ravynOS")
@@ -3858,6 +3863,9 @@
         ;;
 
         "iPhone OS")
+            if command -v nftool > /dev/null; then
+                resolution="$(nftool resolution)"
+            else
             case $kernel_machine in
                 "iPhone1,"[1-2] | "iPhone2,1" | "iPod"[1-3]",1"):                                                                    "320x480"   ;;
                 "iPhone3,"[1-3] | "iPhone4,1" | "iPod4,1"):                                                                          "640x960"   ;;
@@ -3882,6 +3890,7 @@
                 "iPad6,"[7-8] | "iPad7,"[1-2] | "iPad8,"[5-8] | "iPad8,1"[1-2] | "iPad13,"[8-9] | "iPad13,1"[0-1] | "iPad14,"[5-6]): "2048x2732" ;;
             esac
             resolution="$_"
+            fi
         ;;
 
         "Windows")
